{
  "id": "2c0ce03b-88d2-47d0-84a6-056da2618f4e",
  "revision": 0,
  "last_node_id": 14,
  "last_link_id": 40,
  "nodes": [
    {
      "id": 1,
      "type": "BC_LORA_DEFINE",
      "pos": [
        60,
        60
      ],
      "size": [
        350,
        468
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "project_path",
          "type": "STRING",
          "slot_index": 0,
          "links": null
        },
        {
          "name": "source_path",
          "type": "STRING",
          "slot_index": 1,
          "links": [
            2
          ]
        },
        {
          "name": "conform_path",
          "type": "STRING",
          "slot_index": 2,
          "links": [
            3,
            4,
            17
          ]
        },
        {
          "name": "output_path",
          "type": "STRING",
          "slot_index": 3,
          "links": [
            5
          ]
        },
        {
          "name": "project_metadata",
          "type": "STRING",
          "slot_index": 4,
          "links": [
            6,
            7,
            21
          ]
        },
        {
          "name": "training_config",
          "type": "STRING",
          "slot_index": 5,
          "links": [
            8
          ]
        },
        {
          "name": "setup_successful",
          "type": "BOOLEAN",
          "links": null
        },
        {
          "name": "status_message",
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {
        "aux_id": "78Ventures/ComfyUI-BearCave",
        "ver": "16189c286c42ff70429526ec7f2b2024120badc9",
        "Node name for S&R": "BC_LORA_DEFINE"
      },
      "widgets_values": [
        "my_complete_lora",
        "subject_name",
        "/Users/bearcornell/Desktop/LoRA_Dev/Doug_Daulton",
        "subject_trigger_word",
        "sd15",
        "balanced",
        "Complete LoRa training project - prep to final model",
        "",
        true,
        false,
        null
      ]
    },
    {
      "id": 2,
      "type": "BC_LOAD_IMAGES",
      "pos": [
        460,
        60
      ],
      "size": [
        300,
        438
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [
        {
          "name": "input_path",
          "shape": 7,
          "type": "STRING",
          "widget": {
            "name": "input_path"
          },
          "link": 2
        }
      ],
      "outputs": [
        {
          "name": "image_batch",
          "shape": 6,
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            9
          ]
        },
        {
          "name": "masks",
          "shape": 6,
          "type": "MASK",
          "links": null
        },
        {
          "name": "image_paths",
          "shape": 6,
          "type": "STRING",
          "links": null
        },
        {
          "name": "filenames",
          "shape": 6,
          "type": "STRING",
          "links": null
        },
        {
          "name": "count_str",
          "shape": 6,
          "type": "STRING",
          "links": null
        },
        {
          "name": "count_int",
          "shape": 6,
          "type": "INT",
          "links": null
        },
        {
          "name": "images_batch",
          "type": "IMAGE",
          "links": null
        },
        {
          "name": "masks_batch",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "aux_id": "78Ventures/ComfyUI-BearCave",
        "ver": "16189c286c42ff70429526ec7f2b2024120badc9",
        "Node name for S&R": "BC_LOAD_IMAGES"
      },
      "widgets_values": [
        "",
        "",
        0,
        50,
        "1000",
        false,
        0,
        true,
        "numerical",
        "none"
      ]
    },
    {
      "id": 3,
      "type": "BC_DETECT_FACE_ORIENTATION",
      "pos": [
        800,
        60
      ],
      "size": [
        300,
        322
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [
        {
          "name": "image_batch",
          "type": "IMAGE",
          "link": 9
        },
        {
          "name": "filename",
          "shape": 7,
          "type": "STRING",
          "link": null
        },
        {
          "name": "relative_path",
          "shape": 7,
          "type": "STRING",
          "link": null
        },
        {
          "name": "source_directory",
          "shape": 7,
          "type": "STRING",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "image_batch",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            10
          ]
        },
        {
          "name": "face_pose",
          "type": "STRING",
          "slot_index": 1,
          "links": [
            24
          ]
        },
        {
          "name": "confidence",
          "type": "FLOAT",
          "slot_index": 2,
          "links": [
            32
          ]
        },
        {
          "name": "face_count",
          "type": "INT",
          "slot_index": 3,
          "links": []
        },
        {
          "name": "face_detected",
          "type": "BOOLEAN",
          "slot_index": 4,
          "links": [
            33
          ]
        },
        {
          "name": "status",
          "type": "STRING",
          "links": null
        },
        {
          "name": "face_center_x",
          "type": "FLOAT",
          "links": [
            28
          ]
        },
        {
          "name": "face_center_y",
          "type": "FLOAT",
          "links": [
            29
          ]
        },
        {
          "name": "face_width",
          "type": "FLOAT",
          "links": [
            30
          ]
        },
        {
          "name": "face_height",
          "type": "FLOAT",
          "links": [
            31
          ]
        },
        {
          "name": "detection_data",
          "type": "STRING",
          "links": null
        },
        {
          "name": "filename",
          "type": "STRING",
          "links": null
        },
        {
          "name": "relative_path",
          "type": "STRING",
          "links": [
            35
          ]
        }
      ],
      "properties": {
        "aux_id": "78Ventures/ComfyUI-BearCave",
        "ver": "16189c286c42ff70429526ec7f2b2024120badc9",
        "Node name for S&R": "BC_DETECT_FACE_ORIENTATION"
      },
      "widgets_values": [
        1.4,
        0.5
      ]
    },
    {
      "id": 4,
      "type": "BC_IMAGE_LORA_CONFORM",
      "pos": [
        1160,
        60
      ],
      "size": [
        300,
        462
      ],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "image_batch",
          "type": "IMAGE",
          "link": 10
        },
        {
          "name": "filename",
          "shape": 7,
          "type": "STRING",
          "link": null
        },
        {
          "name": "relative_path",
          "shape": 7,
          "type": "STRING",
          "link": 35
        },
        {
          "name": "source_directory",
          "shape": 7,
          "type": "STRING",
          "link": null
        },
        {
          "name": "face_center_x",
          "shape": 7,
          "type": "FLOAT",
          "link": 28
        },
        {
          "name": "face_center_y",
          "shape": 7,
          "type": "FLOAT",
          "link": 29
        },
        {
          "name": "face_width",
          "shape": 7,
          "type": "FLOAT",
          "link": 30
        },
        {
          "name": "face_height",
          "shape": 7,
          "type": "FLOAT",
          "link": 31
        },
        {
          "name": "face_pose",
          "shape": 7,
          "type": "STRING",
          "link": 24
        },
        {
          "name": "detection_confidence",
          "shape": 7,
          "type": "FLOAT",
          "link": 32
        },
        {
          "name": "face_detected",
          "shape": 7,
          "type": "BOOLEAN",
          "link": 33
        }
      ],
      "outputs": [
        {
          "name": "image_batch",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            15,
            18
          ]
        },
        {
          "name": "filename",
          "type": "STRING",
          "links": [
            38
          ]
        },
        {
          "name": "relative_path",
          "type": "STRING",
          "links": [
            39
          ]
        },
        {
          "name": "width",
          "type": "INT",
          "links": [
            36
          ]
        },
        {
          "name": "height",
          "type": "INT",
          "links": [
            37
          ]
        },
        {
          "name": "scale_factor",
          "type": "FLOAT",
          "links": null
        },
        {
          "name": "method_used",
          "type": "STRING",
          "links": null
        },
        {
          "name": "was_upscaled",
          "type": "BOOLEAN",
          "links": null
        },
        {
          "name": "was_cropped",
          "type": "BOOLEAN",
          "links": null
        },
        {
          "name": "crop_info",
          "type": "STRING",
          "links": null
        },
        {
          "name": "process_log",
          "type": "STRING",
          "links": null
        },
        {
          "name": "face_pose",
          "type": "STRING",
          "links": [
            40
          ]
        },
        {
          "name": "detection_confidence",
          "type": "FLOAT",
          "links": null
        },
        {
          "name": "face_detected",
          "type": "BOOLEAN",
          "links": null
        }
      ],
      "properties": {
        "aux_id": "78Ventures/ComfyUI-BearCave",
        "ver": "16189c286c42ff70429526ec7f2b2024120badc9",
        "Node name for S&R": "BC_IMAGE_LORA_CONFORM"
      },
      "widgets_values": [
        1024,
        "LANCZOS",
        "face_center",
        false,
        "black",
        1.5,
        true
      ]
    },
    {
      "id": 5,
      "type": "BC_SAVE_IMAGES",
      "pos": [
        1880,
        70
      ],
      "size": [
        300,
        240
      ],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {
          "name": "image_batch",
          "type": "IMAGE",
          "link": 24
        },
        {
          "name": "output_path",
          "type": "STRING",
          "widget": {
            "name": "output_path"
          },
          "link": 3
        }
      ],
      "outputs": [
        {
          "name": "saved_path",
          "shape": 6,
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {
        "aux_id": "78Ventures/ComfyUI-BearCave",
        "ver": "16189c286c42ff70429526ec7f2b2024120badc9",
        "Node name for S&R": "BC_SAVE_IMAGES"
      },
      "widgets_values": [
        "",
        "conformed",
        "",
        "png",
        100,
        "numerical"
      ]
    },
    {
      "id": 6,
      "type": "BC_LORA_METADATA",
      "pos": [
        80,
        870
      ],
      "size": [
        400,
        404
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [
        {
          "name": "conform_path",
          "type": "STRING",
          "link": 4
        },
        {
          "name": "project_metadata",
          "shape": 7,
          "type": "STRING",
          "link": 6
        },
        {
          "name": "image_list",
          "shape": 7,
          "type": "STRING",
          "link": null
        },
        {
          "name": "face_data",
          "shape": 7,
          "type": "STRING",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "caption_count",
          "type": "STRING",
          "links": null
        },
        {
          "name": "metadata_json",
          "type": "STRING",
          "links": null
        },
        {
          "name": "processing_log",
          "type": "STRING",
          "links": null
        },
        {
          "name": "success",
          "type": "BOOLEAN",
          "links": null
        },
        {
          "name": "status_message",
          "type": "STRING",
          "links": null
        },
        {
          "name": "caption_files",
          "type": "STRING",
          "slot_index": 5,
          "links": [
            16
          ]
        }
      ],
      "properties": {
        "aux_id": "78Ventures/ComfyUI-BearCave",
        "ver": "16189c286c42ff70429526ec7f2b2024120badc9",
        "Node name for S&R": "BC_LORA_METADATA"
      },
      "widgets_values": [
        "subject_trigger_word",
        "photo of",
        "detailed",
        "{}",
        "[]",
        "{}",
        true,
        true,
        "high quality, detailed, professional photo, studio lighting",
        ""
      ]
    },
    {
      "id": 7,
      "type": "BC_LORA_TRAIN",
      "pos": [
        520,
        830
      ],
      "size": [
        450,
        500
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "name": "training_config",
          "type": "STRING",
          "link": 8
        },
        {
          "name": "conform_path",
          "type": "STRING",
          "link": 17
        },
        {
          "name": "output_path",
          "type": "STRING",
          "link": 5
        },
        {
          "name": "project_metadata",
          "shape": 7,
          "type": "STRING",
          "link": 7
        },
        {
          "name": "caption_files",
          "shape": 7,
          "type": "STRING",
          "link": 16
        }
      ],
      "outputs": [
        {
          "name": "training_status",
          "type": "STRING",
          "links": null
        },
        {
          "name": "progress_percentage",
          "type": "STRING",
          "links": null
        },
        {
          "name": "epoch_info",
          "type": "STRING",
          "links": null
        },
        {
          "name": "training_metrics",
          "type": "STRING",
          "links": null
        },
        {
          "name": "model_path",
          "type": "STRING",
          "links": null
        },
        {
          "name": "training_log",
          "type": "STRING",
          "links": null
        },
        {
          "name": "training_active",
          "type": "BOOLEAN",
          "links": null
        },
        {
          "name": "status_message",
          "type": "STRING",
          "links": null
        },
        {
          "name": "training_results",
          "type": "STRING",
          "links": null
        },
        {
          "name": "comfyui_copy_status",
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {
        "aux_id": "78Ventures/ComfyUI-BearCave",
        "ver": "16189c286c42ff70429526ec7f2b2024120badc9",
        "Node name for S&R": "BC_LORA_TRAIN"
      },
      "widgets_values": [
        false,
        false,
        "",
        true,
        true,
        5,
        "",
        false
      ]
    },
    {
      "id": 8,
      "type": "PreviewImage",
      "pos": [
        1890,
        350
      ],
      "size": [
        300,
        246
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {
          "name": "image_batch",
          "type": "IMAGE",
          "link": 18
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.56",
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 9,
      "type": "Note",
      "pos": [
        1010,
        840
      ],
      "size": [
        400,
        300
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "text": "Complete LoRa Workflow Instructions:\n\n🏗️ SETUP PHASE:\n1. Configure project in BC_LORA_DEFINE\n2. Place source images in 01_source folder\n3. Run preparation nodes (Load → Detect → Conform → Save)\n\n🏷️ CAPTION PHASE:\n4. BC_LORA_METADATA generates captions automatically\n5. Review and adjust caption settings if needed\n\n🚀 TRAINING PHASE:\n6. Set 'start_training' to true in BC_LORA_TRAIN\n7. Monitor progress in real-time\n8. Final LoRa model saved to 03_output\n\n⚡ This workflow handles everything from raw images to trained LoRa model!"
      },
      "widgets_values": [
        "Complete LoRa Workflow Instructions:\n\n🏗️ SETUP PHASE:\n1. Configure project in BC_LORA_DEFINE\n2. Place source images in 01_source folder\n3. Run preparation nodes (Load → Detect → Conform → Save)\n\n🏷️ CAPTION PHASE:\n4. BC_LORA_METADATA generates captions automatically\n5. Review and adjust caption settings if needed\n\n🚀 TRAINING PHASE:\n6. Set 'start_training' to true in BC_LORA_TRAIN\n7. Monitor progress in real-time\n8. Final LoRa model saved to 03_output\n\n⚡ This workflow handles everything from raw images to trained LoRa model!"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 10,
      "type": "Note",
      "pos": [
        1490,
        840
      ],
      "size": [
        300,
        180
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "text": "Folder Structure Created:\n\n📁 project_name/\n├── 01_source/ (raw images)\n├── 02_conform/ (processed + captions)\n└── 03_output/ (final LoRa model)\n\nM4 Mac Optimized:\n• 64GB RAM efficient settings\n• Apple Silicon fp16 precision\n• Background training process"
      },
      "widgets_values": [
        "Folder Structure Created:\n\n📁 project_name/\n├── 01_source/ (raw images)\n├── 02_conform/ (processed + captions)\n└── 03_output/ (final LoRa model)\n\nM4 Mac Optimized:\n• 64GB RAM efficient settings\n• Apple Silicon fp16 precision\n• Background training process"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 11,
      "type": "BC_EXIF_WRITER",
      "pos": [
        1510,
        70
      ],
      "size": [
        300,
        574
      ],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {
          "name": "image_batch",
          "type": "IMAGE",
          "link": 15
        },
        {
          "name": "filename",
          "shape": 7,
          "type": "STRING",
          "link": 38
        },
        {
          "name": "relative_path",
          "shape": 7,
          "type": "STRING",
          "link": 39
        },
        {
          "name": "source_directory",
          "shape": 7,
          "type": "STRING",
          "link": null
        },
        {
          "name": "full_path",
          "shape": 7,
          "type": "STRING",
          "link": null
        },
        {
          "name": "width",
          "shape": 7,
          "type": "INT",
          "link": 36
        },
        {
          "name": "height",
          "shape": 7,
          "type": "INT",
          "link": 37
        },
        {
          "name": "file_size",
          "shape": 7,
          "type": "INT",
          "link": null
        },
        {
          "name": "creation_date",
          "shape": 7,
          "type": "STRING",
          "link": null
        },
        {
          "name": "face_pose",
          "shape": 7,
          "type": "STRING",
          "link": 40
        },
        {
          "name": "note",
          "type": "STRING",
          "widget": {
            "name": "note"
          },
          "link": 21
        }
      ],
      "outputs": [
        {
          "name": "file_path",
          "type": "STRING",
          "slot_index": 0,
          "links": [
            24
          ]
        },
        {
          "name": "filename",
          "type": "STRING",
          "links": null
        },
        {
          "name": "metadata_json",
          "type": "STRING",
          "links": null
        },
        {
          "name": "tags",
          "type": "STRING",
          "links": null
        },
        {
          "name": "full_metadata",
          "type": "STRING",
          "links": null
        },
        {
          "name": "save_successful",
          "type": "BOOLEAN",
          "links": null
        },
        {
          "name": "file_size",
          "type": "INT",
          "links": null
        },
        {
          "name": "save_timestamp",
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {
        "aux_id": "78Ventures/ComfyUI-BearCave",
        "ver": "16189c286c42ff70429526ec7f2b2024120badc9",
        "Node name for S&R": "BC_EXIF_WRITER"
      },
      "widgets_values": [
        "neutral",
        "center",
        "LoRa Training - Bear Cave",
        "subject_trigger_word",
        "conform",
        "",
        "",
        "",
        "",
        "",
        "",
        0,
        "",
        "",
        1
      ]
    }
  ],
  "links": [
    [
      2,
      1,
      1,
      2,
      0,
      "STRING"
    ],
    [
      3,
      1,
      2,
      5,
      1,
      "STRING"
    ],
    [
      4,
      1,
      2,
      6,
      0,
      "STRING"
    ],
    [
      5,
      1,
      3,
      7,
      2,
      "STRING"
    ],
    [
      6,
      1,
      4,
      6,
      1,
      "STRING"
    ],
    [
      7,
      1,
      4,
      7,
      3,
      "STRING"
    ],
    [
      8,
      1,
      5,
      7,
      0,
      "STRING"
    ],
    [
      9,
      2,
      0,
      3,
      0,
      "IMAGE"
    ],
    [
      10,
      3,
      0,
      4,
      0,
      "IMAGE"
    ],
    [
      15,
      4,
      0,
      11,
      0,
      "IMAGE"
    ],
    [
      16,
      6,
      5,
      7,
      4,
      "STRING"
    ],
    [
      17,
      1,
      2,
      7,
      1,
      "STRING"
    ],
    [
      18,
      4,
      0,
      8,
      0,
      "IMAGE"
    ],
    [
      21,
      1,
      4,
      11,
      10,
      "STRING"
    ],
    [
      24,
      3,
      1,
      4,
      0,
      "STRING"
    ],
    [
      28,
      3,
      6,
      4,
      4,
      "FLOAT"
    ],
    [
      29,
      3,
      7,
      4,
      5,
      "FLOAT"
    ],
    [
      30,
      3,
      8,
      4,
      6,
      "FLOAT"
    ],
    [
      31,
      3,
      9,
      4,
      7,
      "FLOAT"
    ],
    [
      32,
      3,
      2,
      4,
      9,
      "FLOAT"
    ],
    [
      33,
      3,
      4,
      4,
      10,
      "BOOLEAN"
    ],
    [
      35,
      3,
      12,
      4,
      2,
      "STRING"
    ],
    [
      36,
      4,
      3,
      11,
      5,
      "INT"
    ],
    [
      37,
      4,
      4,
      11,
      6,
      "INT"
    ],
    [
      38,
      4,
      1,
      11,
      1,
      "STRING"
    ],
    [
      39,
      4,
      2,
      11,
      2,
      "STRING"
    ],
    [
      40,
      4,
      11,
      11,
      9,
      "STRING"
    ]
  ],
  "groups": [
    {
      "id": 1,
      "title": "🏗️ Project Setup & Image Preparation",
      "bounding": [
        40,
        0,
        2190,
        670
      ],
      "color": "#3f789e",
      "font_size": 20,
      "flags": {}
    },
    {
      "id": 2,
      "title": "🚀 Caption Generation & LoRa Training",
      "bounding": [
        50,
        700,
        1800,
        660
      ],
      "color": "#8f4673",
      "font_size": 20,
      "flags": {}
    }
  ],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.7767971255070425,
      "offset": [
        278.66951722103624,
        276.5953016279159
      ]
    },
    "frontendVersion": "1.25.11"
  },
  "version": 0.4
}